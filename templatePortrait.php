<html lang="en">

<head>
    <title>Personnalisation Template</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link rel="icon" type="image/x-icon" href="{{asset('img/favicon.ico')}}" />
    <!-- Font Awesome icons (free version)-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <!-- Google fonts-->
 <link href="https://fonts.googleapis.com/css?family=Abril+Fatface" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css2?family=Acme&amp;display=swap" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Alex+Brush" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Amatic+SC" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css2?family=Big+Shoulders+Stencil+Display:wght@300&amp;display=swap" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Bilbo" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Cinzel+Decorative" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Dancing+Script:400,700" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Give+You+Glory" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Grand+Hotel" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Happy+Monkey" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&amp;display=swap" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Italianno" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Italianno" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Lovers+Quarrel|Ruthie" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Miltonian+Tattoo" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Monoton" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Mr+Dafoe" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&amp;display=swap" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Parisienne" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Paytone+One" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Ruthie" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Satisfy" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Spirax" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Tangerine" rel="stylesheet">
                <link href="https://fonts.googleapis.com/css?family=Srisakdi" rel="stylesheet">

    <!-- Core theme CSS (includes Bootstrap)-->
    <!--EMOJI STYLE -->

    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/shepherd.js@5.0.1/dist/js/shepherd.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <script src='js/fabric.min.js'></script>
    <script src='js/jquery-3.5.1.js'></script>
    <link rel="stylesheet" href='css/emojionearea.min.css'>
    <script src='js/emojionearea.min.js'></script>
    <link href='css/styles.css' rel="stylesheet" />
  
</head>
                  <style>
                    #abril-fatface, .abril-fatface{ font-family: 'Abril Fatface', cursive; }
                    #acme, .acme{ font-family: 'Acme', sans-serif; }
                    #alex-brush, .alex-brush{ font-family: 'Alex Brush', cursive; }
                    #amatic-sc, .amatic-sc{ font-family: 'Amatic SC', cursive; }
                    #audiowide, .audiowide{ font-family: 'Audiowide', cursive; }
                    #big-shoulders-stencil-display---light, .big-shoulders-stencil-display---light{ font-family: 'Big Shoulders Stencil Display', cursive; }
                    #bilbo, .bilbo{ font-family: 'Bilbo', cursive; }
                    #cinzel-decorative, .cinzel-decorative{ font-family: 'Cinzel Decorative', cursive; }
                    #dancing-script, .dancing-script{ font-family: 'Dancing Script', cursive; }
                    #give-you-glory, .give-you-glory{ font-family: 'Give You Glory', cursive; }
                    #gloria-hallelujah, .gloria-hallelujah{ font-family: 'Gloria Hallelujah', cursive; }
                    #grand-hotel, .grand-hotel{ font-family: 'Grand Hotel', cursive; }
                    #happy-monkey, .happy-monkey{ font-family: 'Happy Monkey', cursive; }
                    #indie-flower, .indie-flower{ font-family: 'Indie Flower', cursive; }
                    #italianno, .italianno{ font-family: 'Italianno', cursive; }
                    #lato, .lato{ font-family: 'Lato', sans-serif; }
                    #lobster, .lobster{ font-family: 'Lobster', cursive; }
                    #lovers-quarrel, .lovers-quarrel{ font-family: 'Lovers Quarrel', cursive; font-family: 'Ruthie', cursive; }
                    #miltonian-tattoo, .miltonian-tattoo{ font-family: 'Miltonian Tattoo', cursive; }
                    #monoton, .monoton{ font-family: 'Monoton', cursive; }
                    #montserrat, .montserrat{ font-family: 'Montserrat', sans-serif; }
                    #mr-dafoe, .mr-dafoe{ font-family: 'Mr Dafoe', cursive; }
                    #nanum-myeongjo, .nanum-myeongjo{ font-family: 'Nanum Myeongjo', serif; }
                    #pacifico, .pacifico{ font-family: 'Pacifico', cursive; }
                    #parisienne, .parisienne{ font-family: 'Parisienne', cursive; }
                    #paytone-one, .paytone-one{ font-family: 'Paytone One', sans-serif; }
                    #roboto, .roboto{ font-family: 'Roboto', sans-serif; }
                    #ruthie, .ruthie{ font-family: 'Ruthie', cursive; }
                    #sacramento, .sacramento{ font-family: 'Sacramento', cursive; }
                    #satisfy, .satisfy{ font-family: 'Satisfy', cursive; }
                    #source-serif-pro, .source-serif-pro{ font-family: 'Source Serif Pro', serif; }
                    #spirax, .spirax{ font-family: 'Spirax', cursive; }
                    #srisakdi, .srisakdi{ font-family: 'Srisakdi', cursive; }
                    #tangerine, .tangerine{ font-family: 'Tangerine', cursive; }
                </style>



<body id="page-top" onload="loadOptionsUser()">
<style>
    /*
    Removes white gap between slides
    */
    .carousel {
    background:#444;
    }

    /*
    Forces image to be 100% width and not max width of 100%
    */
    .carousel-item .img-fluid {
    width:100%;
    height:auto;
    }

    /* 
    anchors are inline so you need ot make them block to go full width
    */
    .carousel-item a {
    display: block;
    width:100%;
    }
</style>
    <!-- HEADER 
    <header class="bg-primary text-white text-center">

        <div class="container d-flex align-items-center flex-column">
            
            <h1 class="masthead-heading text-uppercase" style="font-size: 4em">CutieBox
            </h1>
    
            <div class="divider-custom divider-light">
                <div class="divider-custom-line"></div>
                <div class="divider-custom-icon">
                    <i class="fab fa-fw fa-instagram"></i>
                </div>
                <div class="divider-custom-line"></div>
            </div>
            
            <p class="masthead-subheading font-weight-light mb-0" style="font-size: 2em;">Votre photobooth nomade</p>
        </div>
    </header>
    -->
    <!-- Portfolio Section-->
    <section class="page-section portfolio" id="portfolio">
        <div class="container text-center col-sm-12">
            <!-- Portfolio Grid Items-->
            <div class="row justify-content-center" style="display:block">
                <!-- TITRE STEP -->
                <h2>Personnaliser votre template</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="divider-custom-line"></div>
                </div>
            </div>
            <!--CATALOGUE -->
            <div class="mx-auto" style="margin-bottom: 15px;">
            <button style="padding: 3px; border-radius:3px; border-color:#ff4297"><a href="https://fr.calameo.com/read/006223822efbb4f329a92" target="_blank" style="color:white">Visualiser notre catalogue en HD</a></button>
                    </div>
                <!-- CAROUSEL -->
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                        <?php for($i=0; $i<=100;$i++){
                            if($i == 0 ){
                                echo('<div class="carousel-item active" >
                                <img src="./src/catalogue/CATALOGUE_LITTLE_BIG-'.$i.'.jpg" width="50%" height="50%">
                            </div>');
                            }else{
                                echo('<div class="carousel-item" >
                                <div style="margin-top:10px">
                                <img src="./src/catalogue/CATALOGUE_LITTLE_BIG-'.$i.'.jpg" width="50%" height="50%">
                                </div>
                                <div class="row">
                                <button class="mx-auto text-center" style="margin-top: 20px; margin-bottom:20px;padding: 7px; border-radius:5px; border-color:#ff4297"onclick="chooseTemplate('.$i.')">Choisir ce template</button>
                                </div>
                            </div>
                            ');
                            }
                        }?>
					</div>
					<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
					</a>
				</div>

                <!-- CAROUSSEL -->

                <!-- END TEST -->

            <div class="row" style="margin-bottom:13px;">
                <!-- POLICE -->
                <div>
                    <span style="margin-left:15px"><i class="fas fa-font"></i> : Police </span>
                    <select name="Police" id="police" title="Choix de la police">
                        <option disabled selected>Selectionner votre police</option>
                        <option id="abril-fatface">Abril Fatface</option>
                        <option id="acme" data-font="Acme">Acme</option>
                        <option id="alex-brush" data-font="Alex Brush">Alex Brush</option>
                        <option id="amatic-sc" data-font="Amatic SC">Amatic SC</option>
                        <option id="audiowide" data-font="Audiowide">Audiowide</option>
                        <option id="big-shoulders-stencil-display---light" data-font="Big Shoulders Stencil Display - Light">Big Shoulders Stencil Display - Light</option>
                        <option id="bilbo" data-font="Bilbo">Bilbo</option>
                        <option id="cinzel-decorative" data-font="Cinzel Decorative">Cinzel Decorative</option>
                        <option id="dancing-script" data-font="Dancing Script">Dancing Script</option>
                        <option id="give-you-glory" data-font="Give You Glory">Give You Glory</option>
                        <option id="gloria-hallelujah" data-font="Gloria Hallelujah">Gloria Hallelujah</option>
                        <option id="grand-hotel" data-font="Grand Hotel">Grand Hotel</option>
                        <option id="happy-monkey" data-font="Happy Monkey">Happy Monkey</option>
                        <option id="indie-flower" data-font="Indie Flower">Indie Flower</option>
                        <option id="italianno" data-font="Italianno">Italianno</option>
                        <option id="lato" data-font="Lato">Lato</option>
                        <option id="lobster" data-font="Lobster">Lobster</option>
                        <option id="lovers-quarrel" data-font="Lovers Quarrel">Lovers Quarrel</option>
                        <option id="miltonian-tattoo" data-font="Miltonian tattoo">Miltonian tattoo</option>
                        <option id="monoton" data-font="Monoton">Monoton</option>
                        <option id="montserrat" data-font="Montserrat">Montserrat</option>
                        <option id="mr-dafoe" data-font="Mr Dafoe">Mr Dafoe</option>
                        <option id="nanum-myeongjo" data-font="Nanum Myeongjo">Nanum Myeongjo</option>
                        <option id="pacifico" data-font="Pacifico">Pacifico</option>
                        <option id="parisienne" data-font="Parisienne">Parisienne</option>
                        <option id="paytone-one" data-font="Paytone One">Paytone One</option>
                        <option id="roboto" data-font="Roboto">Roboto</option>
                        <option id="ruthie" data-font="Ruthie">Ruthie</option>
                        <option id="sacramento" data-font="Sacramento">Sacramento</option>
                        <option id="satisfy" data-font="Satisfy">Satisfy</option>
                        <option id="source-serif-pro" data-font="Source Serif Pro">Source Serif Pro</option>
                        <option id="spirax" data-font="spirax">spirax</option>
                        <option id="srisakdi" data-font="Srisakdi">Srisakdi</option>
                        <option id="tangerine"><div id="tangerine" data-font="Tangerine">Tangerine</div></option>
                    </select>
                </div>
                <!--    SIZE POLICE -->
                <div style="margin-left:10px">
                    <label>  <i class="fas fa-text-height"></i> : Taille</label>
                    <select name="sizePolice" id="sizePolice" title="Choix de la taille de police">
                        <option value="20">20</option>
                        <option value="30">30</option>
                        <option value="40">40</option>
                        <option value="50">50</option>
                        <option value="60">60</option>
                        <option value="70">70</option>
                        <option value="80">80</option>
                        <option value="90">90</option>
                        <option value="100">100</option>
                        <option value="120">120</option>
                    </select>
                </div>
                <!-- FONT COLOR -->
                <div style="margin-left:10px">
                    <label> <i class="fas fa-palette"></i> : Couleur Texte </label>
                    <input type="color" id="color" title="Couleur du texte">

                </div>

                <!-- BOUTON FONT -->
                    <div class="btn-toolbar" style="margin-top:0px;margin-bottom:0px;margin-left:10px">
                        <div class="btn-group">
                            <button class="btn" data-original-title="Bold - Ctrl+B" id="bold" title="Mettre en gras"><i class="icon-bold"></i></button>
                            <button class="btn" data-original-title="Italic - Ctrl+I" id="italic" title="Mettre en italique"><i class="icon-italic"></i></button>
                            <button class="btn" data-original-title="underline" id="underline" title="Souligner le texte"><i class="fas fa-underline"></i></button>
                            <button class="btn" data-original-title="strikethrought" id="strikestrough" title="Barrer le texte"><i class="fas fa-strikethrough"></i></button>
                            <button class="btn" data-original-title="highlight" id="highlight" title="Surligner le texte"><i class="fas fa-highlighter"></i></button>
                        </div>
                        <div id="inputColorHighlight" style="display: none;">
                            <span> Couleur de surbrillance </span>
                            <input type="color" id="colorHighlight" title="Choix de la couleur de surbrillance">
                            <span>Effacer surbrillance</span>
                            <button class="btn" data-original-title="remove-highlight" id="removeHighlight" alt="effacer la surbrillance" title="Effacer la surbrillance"><i class="fas fa-eraser"></i></button>
                        </div>
                    </div>
                    <div>
                    <select name="template2" id="template2" title="Choix du template" style="margin-top:0px;margin-bottom:0px;margin-left:10px">
                        <?php 

                        $list = [
                            "01_MONICA_ET_CHANDLER",
                            "02_TRISTAN_ET_YSEULT",
                            "03_JACK_ET_ROSE",
                            "04_WILL_ET_JADA",
                            "05_RAYMOND_ET_HUGUETTE",
                            "06_EMILIE_ET_JEREMY",
                            "07_ARTHUR_ET_GUENIEVRE",
                            "08_VANESSA_ET_LUDOVIC",
                            "09_SAM_ET_MOLLY",
                            "10_JANE_ET_SERGE",
                            "11_AGATHE_ET_ARNAUD",
                            "12_RACHEL_ET_DANIEL",
                            "13_VANESSA_ET_MATHIEU",
                            "14_EDITH_ET_MARCEL",
                            "15_RUDY_ET_LAURE",
                            "16_CHARLOTTE_ET_YVAN",
                            "17_VICTOR_ET_VICTORIA",
                            "18_FRANCK_ET_AVA",
                            "19_EMMA_ET_FABIEN",
                            "20_SOPHIE_ET_EMMA",
                            "21_MANON_ET_JEAN",
                            "22_YVES_ET_BRIGITTE",
                            "23_AMANDINE_ET_MARIE",
                            "24_FRANCIS_ET_LYDIA",
                            "25_ARNAUD_ET_MANON",
                            "26_PIERRE_ET_VINCENT",
                            "27_PAUL_ET_JOANNE",
                            "28_MATHILDE_ET_JULIEN",
                            "29_CLEMENT_ET_ELISA",
                            "30_VENUS_ET_MARS",
                            "31_ANTOINE_ET_CHLOE",
                            "32_PHILIPPE_ET_MATHILDE",
                            "33_VALERIE_ET_NICOLAS",
                            "34_PAULINE_ET_SEBASTIEN",
                            "35_VANESSA_ET_CHRISTOPHE",
                            "36_ELISE_ET_SIMON",
                            "37_ROMAIN_ET_ADELE",
                            "38_PIERRE_ET_MAEVA",
                            "39_YVES_ET_CHLOE",
                            "40_LUDIVINE_ET_LOÏC",
                            "41_VALENTIN_ET_MARIE",
                            "42_VENUS_ET_APOLLON",
                            "43_KEVIN_ET_ELISE",
                            "44_FREDERIC_ET_NATHALIE",
                            "45_STEPHANE_ET_MARINE",
                            "46_MATHILDE_ET_EMMANUEL",
                            "47_CHRISTOPHE_ET_ASTRIDE",
                            "48_EMMANUEL_ET_LUCIE",
                            "49_ELOISE_ET_PAUL",
                            "50_AURORE_ET_QUENTIN",
                            "51_ETIENNE_ET_ELODIE",
                            "52_MARION_ET_GUILLAUME",
                            "53_CLEMENT_ET_FLORIANNE",
                            "54_MARILYN_ET_ARTHUR",
                            "55_NOEMIE_ET_AYMERIC",
                            "56_CLAIRE_ET_DAVID",
                            "57_MELANIE_ET_PIERRE",
                            "58_WILL_ET_ELISABETH",
                            "59_BAPTISTE_ET_MAXIME",
                            "60_NOEMIE_ET_FABRICE",
                            "61_CHARLOTTE",
                            "62_MANON",
                            "63_NOE",
                            "64_CORALIE",
                            "65_CLEMENCE",
                            "66_JULIE",
                            "67_THOMAS",
                            "68_PAUL",
                            "69_JUSTINE",
                            "70_CLEMENTINE",
                            "71_ANTHONY",
                            "72_AHARON",
                            "73_SARAH",
                            "74_SEBASTIEN",
                            "75_ALICE",
                            "76_NATHAN",
                            "77_TOM",
                            "78_OPHELIE",
                            "79_ERIC",
                            "80_ADAM",
                            "81_MAXIME",
                            "82_GEORGES",
                            "83_LUCA",
                            "84_ARTHUR",
                            "85_AURELIEN",
                            "86_BONNE_ANNEE",
                            "87_FEU_DARTIFICE",
                            "88_JOYEUX_NOEL",
                            "89_COUPE_DE_CHAMPAGNE",
                            "90_TIME",
                            "91_SUCRE_DORGE",
                            "92_SNOW_GOLD",
                            "93_SNOW_GREY",
                            "94_NOEL",
                            "95_CHRISTMAS",
                            "96_CHAMPAGNE",
                            "97_STAR",
                            "98_MERRY_CHRISTMAS",
                            "99_NOUVELLE_ANNEE",
                            "100_FIREWORK"
                        ];
                        $count = count($list);
                        echo('<option disabled selected >Selectionner votre template</option>');
                        for($i=0;$i < $count; $i++){
                            $y=$i+1;
                            echo('<option value="'.$y.'">'.$list[$i].'</option>');
                        }
                        ?>
                    </select>
                    </div>

            </div> 
         </div>
         <!-- TEXT AREA -->
         <textarea id="example1" placeholder="Entrer votre texte içi..🤩👍" style="font-weight: bold"></textarea>

         <!-- BOUTONS DE VALIDATION-->
        <div class="row mx-auto">
        <label></label>
        <button id="ok" title="Prévisualiser le résultat" style="margin-top: 20px; margin-bottom:20px;padding: 7px; border-radius:5px; border-color:#ff4297;margin-right:10px; margin-left:10px">Appliquer les modifications</button>
        <button class="btn btn-success" title="NextStep" id="NextStep"  style="margin-top: 20px; margin-bottom:20px">Passer à la personnalisation 4 poses</button>
        </div>

        <center> 
            <h1>Personnalisation de votre theme </h1>
            <h3>Format portrait 1 pose</h3> 
            <?php $all = $_GET["all"];
            if($all == "true"){
                echo('<h4>Etape 5/7</h4>');
            }else{
                echo('<h4>Etape 1/2</h4>');
            }
            ?>
            <div id="backgroundcanvas" style="background-color:#444;padding:15px; display:none">
            <canvas id="canvas"></canvas> 
            </div>
        </center> 
  
    </section>
    <!-- Footer-->
    <footer class="footer text-center">
        <div class="container">
            <div class="row">
                <!-- Footer Social Icons-->
                <div class="col-lg-4 mb-5 mb-lg-0 mx-auto">
                    <h4 class="text-uppercase mb-4">Suivez nous</h4>
                    <a class="btn btn-outline-light btn-social mx-1" href="https://www.facebook.com/emotions.agency/zm">
                        <i class="fab fa-fw fa-facebook-f" style="color:blue"></i>
                    </a>
                    <a class="btn btn-outline-light btn-social mx-1" href="https://www.youtube.com/channel/UCmWavkLncApzIiwKThO3g3w">
                        <i class="fab fa-fw fa-youtube" style="color:crimson"></i>
                    </a>
                    <a class="btn btn-outline-light btn-social mx-1" href="https://www.instagram.com/emotionsagency/">
                        <i class="fab fa-fw fa-instagram" style="color:indigo"></i>
                    </a>
                    <a class="btn btn-outline-light btn-social mx-1" href="https://emotions-agency.com/">
                        <i class="fab fa-fw fa-dribbble" style="color:black"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    <!-- Copyright Section-->
    <div class="copyright py-4 text-center text-white">
        <div class="container">
            <small>Copyright © Emotions Agency 2020</small>
            <a href="./mentionslegales.html"> Mentions légale<a>
        </div>

    </div>
    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
    <div class="scroll-to-top d-lg-none position-fixed">
        <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>
    <?php 
        $all = $_GET["all"];

        if ($all =="true"){
            $textUser = $_GET["text"];
            $mail = $_GET["mail"];
            $commande = $_GET["commande"];
            $fontweight=$_GET["fontweight"];
            $fontSize=$_GET["fontSize"];
            $fontFamily=$_GET["fontFamily"];
            $underline=$_GET["underline"];
            $linethrough=$_GET["linethrough"];
            $overline=$_GET["overline"];
            $fontStyle=$_GET["fontStyle"];
            $template=$_GET["template"];
            $textBackgroundColor = $_GET["textBackgroundColor"];
            $fontColor = $_GET["fontColor"];
        }else{
            $textUser = "Veuillez saisir votre texte";
            $mail = $_GET["mail"];
            $commande = $_GET["commande"];
            $fontweight="normal";
            $fontSize=40;
            $fontFamily="sans-serif";
            $underline=false;
            $linethrough=false;
            $overline=false;
            $fontStyle='normal';
            $template=1;
            $textBackgroundColor = false;
            $fontColor = "black";
        }
        
            echo('
            <button id="text" value="'.$textUser.'" hidden></button>
            <button id="mail" value="'.$mail.'" hidden></button>
            <button id="commande" value="'.$commande.'" hidden></button>
            <button id="fontweight" value="'.$fontweight.'" hidden></button>
            <button id="fontSize" value="'.$fontSize.'" hidden></button>
            <button id="fontFamily" value="'.$fontFamily.'" hidden></button>
            <button id="underline" value="'.$underline.'" hidden></button>
            <button id="linethrough" value="'.$linethrough.'" hidden></button>
            <button id="overline" value="'.$overline.'" hidden></button>
            <button id="fontStyle" value="'.$fontStyle.'" hidden></button>
            <button id="template" value="'.$template.'" hidden></button>
            <button id="all" value="'.$all.'" hidden></button>
            <button id="textBackgroundColor" value="'.$textBackgroundColor.'" hidden></button>
            <button id="fontColor" value="'.$fontColor.'" hidden></button>
            ');

    ?>
    <script>

        /**********     CREATION CANVA      *************/
        var path;
            var canvas;
            var text;
            function loadOptionsUser(){

                //recup des variable
                fontweight = document.getElementById("fontweight").value;
                fontSize= document.getElementById("fontSize").value;
                fontFamily= document.getElementById("fontFamily").value;
                underline= document.getElementById("underline").value;
                linethrough= document.getElementById("linethrough").value;
                overline= document.getElementById("overline").value;
                fontStyle= document.getElementById("fontStyle").value;
                template= document.getElementById("template").value;
                getText = document.getElementById("text").value;
                getBackgroundColor = document.getElementById("textBackgroundColor").value;
                fontColor = document.getElementById("fontColor").value;

                //condition du stytle text pour le passer de string en boolean
            
                underline == "false" ? underline = false : underline ;
                linethrough == "false"? linethrough = false : linethrough ;
                overline == "false"? overline = false : overline;
                getBackgroundColor == "false"?getBackgroundColor = false : getBackgroundColor;

                optionsGetUser = {

                    fontWeight: fontweight,
                    fontSize: fontSize,
                    fontFamily: fontFamily,
                    underline : underline,
                    linethrough : linethrough,
                    overline : overline,
                    fontStyle: fontStyle,
                    textBackgroundColor: getBackgroundColor,
                    fill:fontColor,
                }
                //ajout template
                chooseTemplate(template,getText,optionsGetUser);
            }

            
        function chooseTemplate(e,getText,optionsGetUser){
            $("#backgroundcanvas").show();
            if(canvas == null){
                id = e;
                path = "src/theme/"+id+"/01_PNG/"+id+"_PORTRAIT_1POSE.png";
                    // Create a new instace of Canvas 
                canvas = new fabric.Canvas("canvas",{
                    width: 1000,
                    height:1500,
                    backgroundImage: path
                }); 
                // Create a new Textbox instance by default
                text = new fabric.Textbox(getText,optionsGetUser)
                canvas.add(text); 
                options["template"] = id;
                
            }else{
                id = e;
                path = "src/theme/"+id+"/01_PNG/"+id+"_PORTRAIT_1POSE.png";
                canvas.remove(text);

                canvas.setBackgroundImage(path, canvas.renderAll.bind(canvas), {
                    // should the image be resized to fit the container?
                    backgroundImageStretch: false
                });
                text = new fabric.Textbox(getText,optionsGetUser)
                canvas.add(text); 
                options["template"] = id;
            } 
        }
        /************   PERSONALISATION TEXTE PAR USER  ************/

        //DEFINITION DES OPTIONS POSSIBLE
        var options = {
            fontWeight: "normal",
            fontSize: 40,
            fontFamily: "sans-serif",
            underline : false,
            linethrough : false,
            overline : false,
            fontStyle: 'normal',
            textBackgroundColor: false,
            fill:"black",
            template:"nothing",

        };
        var optionsText = {
            value : "nothing"
        }

        // *********    CLICK OK    ******************//

        //Ajoute le text & emoji sur le canva
        $("#ok").on('click',()=>{
            if(options["template"] == "nothing"){
                alert("Veuillez choisir un template");
            }else{
                var valueText=document.getElementById("example1").value;
                canvas.remove(text);
                canvas.remove(valueText);
                text = new fabric.Textbox(valueText,options);
                canvas.add(text);
                optionsText["value"] = text
            }
        })
        // ******** ADD EMOJI IN TEXTAREA *******/
        $(document).ready(function() {
            $("#example1").emojioneArea();
        });

        // *********    CLICK BOLD  ******************// 
        var selectBold=0;
        var bold;
        $("#bold").on("click",()=>{
            if (selectBold == 0){
                bold="bold";
                selectBold=1;
            }else{
                bold = "normal";
                selectBold=0;
            } 
            //modifie les options 
            options["fontWeight"] = bold;
            //modifie le pré rendu dans le textare
            $(".emojionearea-editor").css("font-weight",bold)
        });   
        /************   CLICK ITALIC    ***************/
        var selectItalic=0;
        var italic;
        $("#italic").on("click",()=>{ 

            if(selectItalic == 0){
                italic = "italic";
                selectItalic = 1;
            }else{
                italic="normal";
                selectItalic = 0;
            }
            //modifie les options 
            options["fontStyle"] = italic;
            //modifie le pré rendu dans le textare
            $(".emojionearea-editor").css("font-style",italic);
        });
        /*********      CLICK UNDERLINE     ******************/
        var selectUnderline =0;
        var underline;
        $("#underline").on("click",()=>{

            if(selectUnderline == 0){
                underline = true;
                selectUnderline = 1;
            }else{
                underline =false;
                selectUnderline = 0;
            }
            //modifie les options 
            options["underline"] = underline;
            //modifie le pré rendu dans le textare, ajout d'un if car css accepte pas true/false text deocration
            underline == true ? $(".emojionearea-editor").css("text-decoration","underline") : $(".emojionearea-editor").css("text-decoration","none")
        });
        /***********    STRIKETHROUGH   **************/
        var selectStrike = 0;
        var strike;
        $("#strikestrough").on("click",()=>{
            if(selectStrike == 0){
                strike = true
                selectStrike = 1;
            }else{
                selectStrike=0;
                strike = false
            }
            options["linethrough"] = strike;
            //modifie le pré rendu dans le textare, ajout d'un if car css accepte pas true/false text-deocration-line
            strike == true ? $(".emojionearea-editor").css("text-decoration-line","line-through") : $(".emojionearea-editor").css("text-decoration-line","none")
        });

        /************ SIZE POLICE *********************/
        $("#sizePolice").on("change",(event)=>{
            pt = event.target.value;
            options["fontSize"] = pt;
        });
        /************ CHANGE POLICE *********************/  
        $("#police").on("change", (event)=>{ // au changement du select
            police = event.target.value; 
            options["fontFamily"] = police;
            $(".emojionearea-editor").css("font-family", police);
        });

        /***********    COLOR POLICE    *******************/
        $("#color").on('change',(event)=>{
            color = event.target.value;
            options["fill"] = color;
            $(".emojionearea-editor").css("color",color); 
        });
        /**************     HIGHLIGHT    ************************/
        var highlightActive = false;
        //Active bouton & show/hide pallette de couleur
        $("#highlight").on("click",()=>{
            if(highlightActive == false){
                $("#inputColorHighlight").show();
                highlightActive = true;
            }else{
                $("#inputColorHighlight").hide();
                highlightActive = false;
            }
        });
        //Definition de la couleur de surbrillance
        $("#colorHighlight").on("change",(event)=>{
            color = event.target.value;
            options["textBackgroundColor"] = color;
            $(".emojionearea-editor").css("background-color",color);
        })
        // Remove surbrillance
        $("#removeHighlight").on("click",()=>{
            options["textBackgroundColor"] = false;
            $(".emojionearea-editor").css("background-color","transparent");
        });

        //**************** CHANGE TEMPLATE WITH LIST ****************** */
        $("#template2").on("change",(event)=>{
                value = event.target.value;
                chooseTemplate(value,getText,optionsGetUser);
        });
        // ***************** VALIDATION TEMPLATE n*1 ******************** /
        $("#validationTemplate").on("click",()=>{
            


        });
        // ************* NEXT STEP ********************
        $('#NextStep').on('click', ()=>{
            if(options["template"] != "nothing"){

                //j'ai besoin des options choisie => options & optionsText["value"]
                //d'enregistrer le fichier créer dans un dossier en attente
                // des informations de base du user à savoir mail, options(centrer,paysage,portrait,all, ou cutiebox), n°commande
                // ajouter un modal pour dire attention si vous poursuivez ne pourrez pas revenir en arrière
                //si poursuivie nouveau modal
                //Creer l'autre template par default
                //afficher le template par default
                //laisser le choix de modifier ou sinon valider 

                mail = document.getElementById("mail").value;
                commande = document.getElementById("commande").value;
                textUser = optionsText["value"]["text"];
                if(textUser == undefined){
                    textUser = getText
                }
                all = document.getElementById("all").value;


                if(all == "true"){
                        $.ajax({
                        type: "POST",
                        url: "/saveTemplate.php",
                        data: {
                            "image" : canvas.toDataURL(),
                            "format": "portrait_1pose",
                            "mail": mail,
                            "commande": commande
                        }, 
                    }).then(()=>{
                        var link = document.createElement("a");
                        link.href = "/templatePortrait2.php?mail="+mail+
                                    "&commande="+commande+
                                    "&all="+all+
                                    "&fontweight="+ encodeURIComponent(optionsGetUser["fontWeight"])+
                                    "&fontSize="+encodeURIComponent(optionsGetUser["fontSize"])+
                                    "&fontFamily="+encodeURIComponent(optionsGetUser["fontFamily"])+
                                    "&underline="+ encodeURIComponent(optionsGetUser["underline"])+
                                    "&linethrough="+ encodeURIComponent(optionsGetUser["linethrough"])+
                                    "&overline="+ encodeURIComponent(optionsGetUser["overline"])+
                                    "&fontStyle="+encodeURIComponent(optionsGetUser["fontStyle"])+
                                    "&template="+encodeURIComponent(options["template"])+
                                    "&text="+encodeURIComponent(textUser)+
                                    "&textBackgroundColor="+ encodeURIComponent(textBackgroundColor.value)+
                                    "&fontColor="+encodeURIComponent(optionsGetUser["fill"]),
                        link.click();
                        link.delete;
                    });  
                }else{
                    $.ajax({
                    type: "POST",
                    url: "/saveTemplate.php",
                    data: {
                        "image" : canvas.toDataURL(),
                        "format": "portrait_1pose",
                        "mail": mail,
                        "commande": commande
                    }, 
                }).then(()=>{
                    var link = document.createElement("a");
                    link.href = "/templatePortrait2.php?mail="+mail+
                                "&commande="+commande+
                                "&all="+all+
                                "&fontweight="+ encodeURIComponent(options["fontWeight"])+
                                "&fontSize="+encodeURIComponent(options["fontSize"])+
                                "&fontFamily="+encodeURIComponent(options["fontFamily"])+
                                "&underline="+ encodeURIComponent(options["underline"])+
                                "&linethrough="+ encodeURIComponent(options["linethrough"])+
                                "&overline="+ encodeURIComponent(options["overline"])+
                                "&fontStyle="+encodeURIComponent(options["fontStyle"])+
                                "&template="+encodeURIComponent(options["template"])+
                                "&text="+encodeURIComponent(textUser)+
                                "&textBackgroundColor="+ encodeURIComponent(textBackgroundColor.value)+
                                "&fontColor="+encodeURIComponent(options["fill"]),
                    link.click();
                    link.delete;
                });  
                }

            }else{
                alert("Veuillez choisir un template");
            }
        });
    </script>
        <script>
    const tour = new Shepherd.Tour({
            defaultStepOptions: {
            cancelIcon: {
            enabled: true
            },
            classes: 'class-1 class-2',
            scrollTo: { behavior: 'smooth', block: 'center' }
        }
        });

        tour.addStep({
        title: 'Votre personnalisation',
        text: `Içi vous pouvez feuilleter notre catalogue de template`,
        attachTo: {
            element: '#catalogue',
            on: 'bottom'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating'
        });

        tour.addStep({
        title: 'Retrouver directement nos templates\n juste içi',
        text: 'Cliquer sur les fleches de gauche ou de droite, pour naviguer',
        attachTo: {
            element: '#carouselExampleIndicators',
            on: 'right'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Celui-çi vous plait ?',
        text: 'Cliquer sur le bouton rose il est maintenant afficher plus bas',
        attachTo: {
            element: '#carouselExampleIndicators',
            on: 'bottom'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Vous avez feuilleter le catalogue ?',
        text: 'Selectionner avec la liste déroulante avec le numéro choisie ',
        attachTo: {
            element: '#template2',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Choissez votre typographie favorite',
        text: 'Selectionner avec la liste déroulante avec la police qui vous plait',
        attachTo: {
            element: '#police',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Choissez votre taille de Police (facultatif)',
        text: 'Selectionner avec la liste déroulante la taille de police qui vous plait',
        attachTo: {
            element: '#sizePolice',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Choissez votre couleur de police(facultatif)',
        text: 'Selectionner votre couleur en cliquant ',
        attachTo: {
            element: '#color',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Boite à outils de personnalisation (facultatif)',
        text: 'Selectionner en cliquant sur le bouton souhaiter, pour annuler cliquer de nouveaux dessus',
        attachTo: {
            element: '#underline',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Entrer votre texte içi',
        text: 'Laisser exprimer votre imagination',
        attachTo: {
            element: '.emojionarena',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Ajouter des smileys (facultatif)',
        text: 'Cliquer sur le 😀 en haut a droite de la zone de texte pour ouvrir le panneau de smileys',
        attachTo: {
            element: '.emojionarena',
            on: 'right'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Voir le rendu sur votre template',
        text: 'Cliquer sur le bouton rose Appliqer les modifications',
        attachTo: {
            element: '#ok',
            on: 'bottom'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Placer ou vous souhaiter vote texte',
        text: 'Cliquer sur votre et déplacer le ou vous souhaiter',
        attachTo: {
            element: '#backgroundcanvas',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'Suivant'
            }
        ],
        id: 'creating2'
        });

        tour.addStep({
        title: 'Vous êtes satisfait ?',
        text: 'Cliquer sur le boutton vert pour valider et passer aux autres personnalisation',
        attachTo: {
            element: '#NextStep',
            on: 'top'
        },
        buttons: [
            {
            action() {
                return this.back();
            },
            classes: 'shepherd-button-secondary',
            text: 'Retour'
            },
            {
            action() {
                return this.next();
            },
            text: 'J\'ai tout compris !'
            }
        ],
        id: 'creating2'
        });

        tour.start();

  </script>

</body>


</html>
 